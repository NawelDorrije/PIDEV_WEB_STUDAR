{# _form.html.twig #}
<div class="container py-4" style="max-width: 1200px;">
    <div class="bg-white border mb-4">
        <div class="p-3 border-bottom">
            <h2 class="h5 fw-normal mb-0">
                {% if form.vars.data and form.vars.data.idVoiture %}
                    Modifier le véhicule
                {% else %}
                    Nouveau véhicule
                {% endif %}
            </h2>
        </div>
        <div class="p-3">
            {% if form.vars.data and form.vars.data.utilisateur %}
            <div class="mb-3">
                <p class="small text-muted mb-1">Transporteur</p>
                <p>{{ form.vars.data.utilisateur.cin }} - {{ form.vars.data.utilisateur.nom }} {{ form.vars.data.utilisateur.prenom }}</p>
            </div>
            {% endif %}

            {{ form_start(form) }}
                {{ form_row(form.model, {
                    'label': 'Modèle',
                    'label_attr': {'class': 'small'},
                    'attr': {'class': 'form-control rounded-0'}
                }) }}
                
                {{ form_row(form.numSerie, {
                    'label': 'Numéro de série',
                    'label_attr': {'class': 'small'},
                    'attr': {'class': 'form-control rounded-0'}
                }) }}

                <div class="mb-3">
                    {{ form_label(form.imageFile, 'Image', {'label_attr': {'class': 'small'}}) }}
                    {% if form.vars.data and form.vars.data.idVoiture and form.vars.data.image %}
                        <div class="mb-2">
                            <img src="{{ vich_uploader_asset(form.vars.data, 'imageFile') }}" 
                                 class="img-fluid mb-1" style="max-height: 100px;">
                            <p class="small text-muted">Image actuelle</p>
                        </div>
                    {% endif %}
                    {{ form_widget(form.imageFile, {'attr': {'class': 'form-control rounded-0'}}) }}
                    {{ form_errors(form.imageFile) }}
                </div>

                {{ form_row(form.disponibilite, {
                    'label': 'Disponibilité',
                    'label_attr': {'class': 'small'},
                    'attr': {'class': 'form-select rounded-0'}
                }) }}

                <div class="d-flex justify-content-between mt-4">
                    <a href="{{ path('app_voiture_index') }}" class="btn btn-outline-dark rounded-0 px-4">
                        Annuler
                    </a>
                    <button type="submit" class="btn bg-orange text-white rounded-0 px-4">
                        {{ button_label|default('Enregistrer') }}
                    </button>
                </div>
            {{ form_end(form) }}
        </div>
    </div>

    <a href="{{ path('app_transport_home') }}" class="text-dark text-decoration-none small">
        ← Retour à l'accueil
    </a>
</div>